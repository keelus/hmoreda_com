{{ define "navbar.html"}}
<link rel="stylesheet" href="/static/sass/compilado/navbar.css">
<script src="https://kit.fontawesome.com/f5ff5005d3.js" crossorigin="anonymous"></script>
<div class="navegador">
	<a class="parteIzquierda" href="/">
		<div class="logo">
			<img src="/static/imagenes/logo.svg" alt="" srcset="">
		</div>
		<div class="logo-titulo">Hugo <br> Moreda's <br> Blog</div>
	</a>
	<div class="parteDerecha">
		<a class="opcion render-link" href="/posts/">Posts</a>
		<div class="opcion"><input type="text" placeholder="🔎 Search a post about..."></div>
		{{- if eq .UsuarioActual.Nombre nil -}}
			<a class="opcion" href="/login"><button>Log in</button></a>
		{{- else -}}
		<div class="opcion opcion-notificaciones">
			<div class="hoverOuter">
				<div class="iconoNotificaciones hayNotificaciones">🔔</div>
			</div>
			<div class="menuNotificaciones">
				<div class="parteTitulo">You have 3 notifications</div>
				<div class="parteNotificaciones">
					<a class="notificacion">
						<div class="contenido"><div class="icono">🔐</div>You changed your password.</div>
						<div class="eliminar" title="Delete notification"><i class="fa-solid fa-trash"></i></div>
					</a>
					<a class="notificacion interactuable">
						<div class="contenido" title="Open notification origin"><div class="icono">💗</div><span href="#" class="linkUsuario" >keelus</span>&nbsp;has liked your comment.</div>
						<div class="eliminar" title="Delete notification"><i class="fa-solid fa-trash"></i></div>
					</a>
					<a class="notificacion interactuable">
						<div class="contenido" title="Open notification origin"><div class="icono">💬</div><span href="#" class="linkUsuario" >keelus</span>&nbsp;answered your comment.</div>
						<div class="eliminar" title="Delete notification"><i class="fa-solid fa-trash"></i></div>
					</a>
				</div>
			</div>
		</div>
		<div class="opcion opcion-perfil">
			<div class="hoverOuter">
				<div class="fotoPerfil" style="background-image:url('/utils/avatar/{{- .UsuarioActual.Nombre -}}');"></div>
			</div>
			<div class="menuPerfil">
				<div class="parteUsuario">
					<div class="parteIzquierda">
						<div class="fotoPerfil" style="background-image:url('/utils/avatar/{{- .UsuarioActual.Nombre -}}');"></div>
					</div>
					<div class="parteDerecha">
						<div class="nombre">{{- .UsuarioActual.Nombre -}}</div>
						<div class="email">{{- .UsuarioActual.Email -}}</div>
					</div>
				</div>
				<div class="parteInferior">
					<a class="opcion" href="/profile/{{- .UsuarioActual.Nombre -}}">
						<div class="iconoOuter">
							🦄
						</div>
						View profile</a>
					<a class="opcion" href="/social">
						<div class="iconoOuter">
							🤝
						</div>
						Friends</a>
					<a class="opcion" onmouseenter="this.querySelector('.iconoOuter i').classList.add('fa-spin')"
										onmouseleave="this.querySelector('.iconoOuter i').classList.remove('fa-spin')" 
										href="/profile/settings">
						<div class="iconoOuter">
							⚙️
						</div>
						Settings</a>
					<a class="opcion" href="/logout">
						<div class="iconoOuter">
							🚪
						</div>
						Logout</a>
				</div>
			</div>
		</div>
		{{- end -}}
	</div>
</div>
<script>
	$(".hoverOuter").on("click", (e) => {
		padre = $(e.target).closest(".opcion-perfil")
		
		if ($(padre).hasClass("activo")) {
			$(padre).removeClass("activo")
		} else {
			$(padre).addClass("activo")
		}
	})

	$(document).on("click", (e) => {
		padre = $(e.target).closest(".opcion-perfil")
		if (padre.length == 0) {
			$(".opcion-perfil").removeClass("activo")
		}
	})

	
	$(".hoverOuter").on("click", (e) => {
		padre = $(e.target).closest(".opcion-notificaciones")
		
		if ($(padre).hasClass("activo")) {
			$(padre).removeClass("activo")
		} else {
			$(padre).addClass("activo")
		}
	})

	$(document).on("click", (e) => {
		padre = $(e.target).closest(".opcion-notificaciones")
		if (padre.length == 0) {
			$(".opcion-notificaciones").removeClass("activo")
		}
	})
</script>
{{ end }}